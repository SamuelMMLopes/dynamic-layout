(()=>{var e={};e.id=931,e.ids=[931],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},5903:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>d,routeModule:()=>p,tree:()=>c});var i=s(6427),r=s(7953),o=s(5145),l=s.n(o),n=s(5288),a={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>n[e]);s.d(t,a);let u=i.AppPageRouteModule,c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7699)),"C:\\projects\\personal\\dynamic-layout\\apps\\docs\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,8066)),"C:\\projects\\personal\\dynamic-layout\\apps\\docs\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,1726,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\projects\\personal\\dynamic-layout\\apps\\docs\\src\\app\\page.tsx"],h="/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new u({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7524:(e,t,s)=>{Promise.resolve().then(s.bind(s,7117))},7117:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var i=s(2395),r=s(8726),o=s(7177);function l(){let[e]=(0,r.useState)({mode:"fixed",sliceHeight:85,sliceWidth:85,gap:5,totalColumns:10,totalRows:10,widthOfVisibleArea:1e3,items:[{id:"1",startColumn:1,startRow:1,filledColumns:2,filledRows:2},{id:"2",filledColumns:5,filledRows:2},{id:"3",filledColumns:5,filledRows:2},{id:"4",filledColumns:5,filledRows:2},{id:"5",filledColumns:5,filledRows:2}]});return i.jsx("div",{className:"h-screen w-screen flex items-center justify-center",children:(0,i.jsxs)(o.DynamicLayout.Root,{settings:e,allowDrag:!0,children:[i.jsx(o.DynamicLayout.AutoPosition,{children:"AutoSize"}),i.jsx(o.DynamicLayout.Viewport,{className:"h-[800px] w-[1000px] overflow-scroll",children:(0,i.jsxs)(o.DynamicLayout.Area,{className:"bg-square",children:[i.jsx(o.DynamicLayout.Item,{id:"1",className:"bg-red-500",children:"1"}),i.jsx(o.DynamicLayout.Item,{id:"2",className:"bg-red-500",children:"2"}),i.jsx(o.DynamicLayout.Item,{id:"3",className:"bg-red-500",children:"3"}),i.jsx(o.DynamicLayout.Item,{id:"4",className:"bg-red-500",children:"4"}),i.jsx(o.DynamicLayout.Item,{id:"5",className:"bg-red-500",children:"5"})]})})]})})}},5501:e=>{"use strict";var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,o={};((e,s)=>{for(var i in s)t(e,i,{get:s[i],enumerable:!0})})(o,{Item:()=>l,Layout:()=>a,Occupancies:()=>n}),e.exports=((e,o,l,n)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let l of i(o))r.call(e,l)||void 0===l||t(e,l,{get:()=>o[l],enumerable:!(n=s(o,l))||n.enumerable});return e})(t({},"__esModule",{value:!0}),o);var l=class e{constructor(e,t,s,i,r,o,l){this.id=e,this.startColumn=t,this.endColumn=s,this.startRow=i,this.endRow=r,this.filledColumns=o,this.filledRows=l,Object.freeze(this)}static create({id:t,startColumn:s,startRow:i,filledColumns:r,filledRows:o}){let l=s+r-1,n=i+o-1;return new e(t,s,l,i,n,r,o)}height({sliceHeight:e,gap:t}){let s=this.filledRows*(e+t);return s-t}width({sliceWidth:e,gap:t}){let s=this.filledColumns*(e+t);return s-t}xAxis({sliceWidth:e,gap:t}){return(this.startColumn-1)*(e+t)}yAxis({sliceHeight:e,gap:t}){return(this.startRow-1)*(e+t)}hasCollision(e){return e.id!==this.id&&this.startColumn<=e.endColumn&&e.startColumn<=this.endColumn&&this.startRow<=e.endRow&&e.startRow<=this.endRow}toObject(){return{id:this.id,filledColumns:this.filledColumns,filledRows:this.filledRows,startColumn:this.startColumn,startRow:this.startRow}}},n=class{constructor(e,t){this.items=e,this.sliceWidth=t;let s=this.lastFilledSlot();this.lastFilledColumn=s.column,this.lastFilledRow=s.row,Object.freeze(this)}lastFilledSlot(){return this.items.reduce((e,t)=>(t.endColumn>e.column&&(e.column=t.endColumn),t.endRow>e.row&&(e.row=t.endRow),e),{column:0,row:0})}nextSlot({widthOfVisibleArea:e,filledColumns:t,filledRows:s}){let i=Math.floor(e/this.sliceWidth),r=1;for(;;){for(let e=1;e<=i;e++){let i=l.create({id:"fake-id",startColumn:e,startRow:r,filledColumns:t,filledRows:s});if(this.items.every(e=>!e.hasCollision(i)))return{startColumn:e,startRow:r}}r++}}},a=class e{constructor(e,t,s,i,r,o,l,a){this.mode=e,this.sliceHeight=t,this.sliceWidth=s,this.gap=i,this.minTotalColumns=r,this.minTotalRows=o,this.widthOfVisibleArea=l,this.items=a,this.occupancies=new n(this.items,this.sliceWidth),Object.freeze(this)}static create({mode:t,sliceHeight:s,sliceWidth:i=0,gap:r,totalColumns:o,totalRows:n,availableWidth:a=0,widthOfVisibleArea:u,items:c=[]}){if("fixed"===t&&!i||"horizontallyResponsive"===t&&!a)throw Error("Invalid layout");let d="fixed"===t?i:(a-o*r)/o,{itemsWithDefinedOccupancy:h,itemsWithUndefinedOccupancy:m}=c.reduce((e,{startColumn:t,startRow:s,...i})=>(void 0!==t&&void 0!==s?e.itemsWithDefinedOccupancy.push(l.create({...i,startColumn:t,startRow:s})):e.itemsWithUndefinedOccupancy.push(i),e),{itemsWithDefinedOccupancy:[],itemsWithUndefinedOccupancy:[]}),p=new e(t,s,d,r,o,n,u,h);return m.reduce((e,t)=>e.addItem(t),p)}get totalColumns(){return"horizontallyResponsive"===this.mode?this.minTotalColumns:Math.max(this.occupancies.lastFilledColumn+3,this.minTotalColumns)}get totalRows(){return Math.max(this.occupancies.lastFilledRow+3,this.minTotalRows)}height(){return(this.sliceHeight+this.gap)*this.totalRows}width(){return(this.sliceWidth+this.gap)*this.totalColumns}addItem({id:t,startColumn:s,startRow:i,filledColumns:r,filledRows:o}){let n=void 0!==this.items.find(e=>e.id===t);if(n)return this;if(!s||!i){let{startColumn:s,startRow:i}=this.occupancies.nextSlot({filledColumns:r,filledRows:o,widthOfVisibleArea:this.widthOfVisibleArea});return new e(this.mode,this.sliceHeight,this.sliceWidth,this.gap,this.totalColumns,this.totalRows,this.widthOfVisibleArea,[...this.items,l.create({id:t,startColumn:s,startRow:i,filledColumns:r,filledRows:o})])}return new e(this.mode,this.sliceHeight,this.sliceWidth,this.gap,this.totalColumns,this.totalRows,this.widthOfVisibleArea,[...this.items,l.create({id:t,startColumn:s,startRow:i,filledColumns:r,filledRows:o})])}applyAutoPosition(){let t=this.items.map(e=>({id:e.id,filledColumns:e.filledColumns,filledRows:e.filledRows}));return e.create({mode:this.mode,sliceHeight:this.sliceHeight,sliceWidth:this.sliceWidth,gap:this.gap,totalColumns:this.minTotalColumns,totalRows:this.minTotalRows,widthOfVisibleArea:this.widthOfVisibleArea,items:t})}columnsToMove({currentMouseXAxis:e,lastMouseXAxis:t,currentScrollXAxis:s,lastScrollXAxis:i}){return Math.round((e-t+(s-i))/(this.sliceWidth+this.gap))}rowsToMove({currentMouseYAxis:e,lastMouseYAxis:t,currentScrollYAxis:s,lastScrollYAxis:i}){return Math.round((e-t+(s-i))/(this.sliceHeight+this.gap))}moveItem({itemToMove:t,currentMouseAxes:s,lastMouseAxes:i,currentScrollAxes:r,lastScrollAxes:o}){let n=this.columnsToMove({currentMouseXAxis:s.xAxis,lastMouseXAxis:i.xAxis,currentScrollXAxis:r.xAxis,lastScrollXAxis:o.xAxis}),a=t.startColumn+n,u=this.rowsToMove({currentMouseYAxis:s.yAxis,lastMouseYAxis:i.yAxis,currentScrollYAxis:r.yAxis,lastScrollYAxis:o.yAxis}),c=t.startRow+u;if(a<1||c<1)return this;let d=l.create({...t,startColumn:a,startRow:c}),h=this.items.filter(e=>e.hasCollision(d));if(h.length>0)return this;let m=this.items.filter(e=>e.id!==t.id);return new e(this.mode,this.sliceHeight,this.sliceWidth,this.gap,this.minTotalColumns,this.minTotalRows,this.widthOfVisibleArea,[...m,d])}toObject(){return{mode:this.mode,sliceHeight:this.sliceHeight,sliceWidth:this.sliceWidth,gap:this.gap,totalColumns:this.totalColumns,totalRows:this.totalRows,widthOfVisibleArea:this.widthOfVisibleArea,items:this.items.map(e=>e.toObject())}}}},7177:(e,t,s)=>{"use strict";var i=Object.defineProperty,r=Object.defineProperties,o=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,s)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,h=(e,t)=>{for(var s in t||(t={}))u.call(t,s)&&d(e,s,t[s]);if(a)for(var s of a(t))c.call(t,s)&&d(e,s,t[s]);return e},m=(e,t)=>r(e,l(t)),p=(e,t)=>{var s={};for(var i in e)u.call(e,i)&&0>t.indexOf(i)&&(s[i]=e[i]);if(null!=e&&a)for(var i of a(e))0>t.indexOf(i)&&c.call(e,i)&&(s[i]=e[i]);return s},f={};((e,t)=>{for(var s in t)i(e,s,{get:t[s],enumerable:!0})})(f,{DynamicLayout:()=>I}),e.exports=((e,t,s,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of n(t))u.call(e,s)||void 0===s||i(e,s,{get:()=>t[s],enumerable:!(r=o(t,s))||r.enumerable});return e})(i({},"__esModule",{value:!0}),f);var x=s(5501),g=s(8726),w=s(4262),y=s(2395),C=(0,w.createContext)({});function b({settings:e,allowDrag:t=!1,onLayoutChange:s=()=>{},children:i}){let[r,o]=(0,g.useState)(x.Layout.create(e)),[l,n]=(0,g.useState)(!1),a=(0,g.useRef)(null),u=(0,g.useRef)(null),c=(0,g.useRef)(null),d=(0,g.useRef)(null);(0,g.useEffect)(()=>{o(x.Layout.create(e))},[e]);let h=(0,g.useCallback)(({item:e,event:s})=>{null!==a.current&&t&&(s.stopPropagation(),n(!0),d.current=e,u.current={xAxis:s.clientX,yAxis:s.clientY},c.current={xAxis:a.current.scrollLeft,yAxis:a.current.scrollTop})},[t]),m=(0,g.useCallback)(()=>!!t&&null!==d.current&&null!==u.current&&null!==c.current,[t]),p=(0,g.useCallback)(e=>{if(!m)return;e.stopPropagation();let t=r.moveItem({itemToMove:d.current,currentMouseAxes:{xAxis:e.clientX,yAxis:e.clientY},lastMouseAxes:u.current,currentScrollAxes:{xAxis:a.current.scrollLeft,yAxis:a.current.scrollTop},lastScrollAxes:c.current});t!==r&&o(t)},[m,r]),f=(0,g.useCallback)(()=>{t&&(n(!1),d.current=null,u.current=null,c.current=null,s(r.toObject()))},[t,r,s]),w=(0,g.useCallback)(()=>{o(e=>{let t=e.applyAutoPosition();return s(t.toObject()),t})},[s]);return(0,y.jsx)(C.Provider,{value:{layout:r,isDragging:l,allowDrag:t,viewportRef:a,onDragStart:h,onDrag:p,onDragEnd:f,applyAutoPosition:w},children:i})}var v=s(8726),A=s(4262),R=s(2395),j=(0,v.memo)(function(e){var{item:t,sliceHeight:s,sliceWidth:i,gap:r,style:o}=e,l=p(e,["item","sliceHeight","sliceWidth","gap","style"]);let n=(0,A.useContextSelector)(C,e=>e.onDragStart),a=(0,A.useContextSelector)(C,e=>e.onDragEnd),u=(0,A.useContextSelector)(C,e=>e.allowDrag),[c,d]=(0,v.useState)(!1),f=(0,v.useMemo)(()=>`${t.height({sliceHeight:s,gap:r})}px`,[r,t,s]),x=(0,v.useMemo)(()=>`${t.width({sliceWidth:i,gap:r})}px`,[r,t,i]),g=(0,v.useMemo)(()=>`${t.xAxis({sliceWidth:i,gap:r})}px`,[r,t,i]),w=(0,v.useMemo)(()=>`${t.yAxis({sliceHeight:s,gap:r})}px`,[r,t,s]),y=(0,v.useMemo)(()=>m(h({},o),{"--item-height":f,"--item-width":x,position:"absolute",height:f,width:x,left:g,top:w,transition:"height 125ms linear 125ms,width 125ms linear 0s,top 175ms ease-out,left 175ms ease-out,right 175ms ease-out"}),[f,g,o,w,x]),b=(0,v.useCallback)(e=>{n({item:t,event:e})},[t,n]),j=(0,v.useCallback)(()=>{a(),d(!1)},[a]);return(0,R.jsx)("div",m(h({},l),{draggable:u,"data-is-dragging":c,"data-allow-drag":u,style:y,onDragStart:b,onDragEnd:j}))}),O=s(8726),P=s(4262),M=s(2395),S=s(2790),D=s(4262),W=s(2395),_=s(2395),T=s(2395),H=s(4262),L=s(2395),I={Root:function(e){return(0,T.jsx)(b,h({},e))},Viewport:function(e){let t=(0,H.useContextSelector)(C,e=>e.viewportRef);return(0,L.jsx)("div",m(h({},e),{ref:t}))},Area:function(e){var{style:t}=e,s=p(e,["style"]);let i=(0,P.useContextSelector)(C,e=>e.layout),r=(0,P.useContextSelector)(C,e=>e.allowDrag),o=(0,P.useContextSelector)(C,e=>e.isDragging),l=(0,P.useContextSelector)(C,e=>e.onDrag),n=(0,O.useMemo)(()=>m(h({},t),{position:"relative",height:`${i.height()}px`,width:`${i.width()}px`}),[i,t]),a=(0,O.useMemo)(()=>O.Children.map(s.children,e=>{let t=i.items.find(t=>t.id===e.props.id);return void 0===t?null:(0,M.jsx)(j,m(h({},e.props),{item:t,sliceHeight:i.sliceHeight,sliceWidth:i.sliceWidth,gap:i.gap}))}),[i.gap,i.items,i.sliceHeight,i.sliceWidth,s.children]);return(0,M.jsx)("div",m(h({},s),{style:n,"data-allow-drag":r,"data-is-dragging":o,onDragOver:l,children:a}))},Item:function(e){return(0,_.jsx)("div",h({},e))},AutoPosition:function({asChild:e=!1,children:t}){let s=(0,D.useContextSelector)(C,e=>e.applyAutoPosition),i=e?S.Slot:"button";return(0,W.jsx)(i,{onClick:s,children:t})}}},7699:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>o,default:()=>a});var i=s(6962);let r=(0,i.createProxy)(String.raw`C:\projects\personal\dynamic-layout\apps\docs\src\app\page.tsx`),{__esModule:o,$$typeof:l}=r,n=r.default,a=n}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[412,689,809],()=>s(5903));module.exports=i})();